#!/bin/sh

# Desktop Login sound
paplay ~/.config/labwc/sound/desktop-login.oga >/dev/null 2>&1 &

# NOTE: lxqt-panel is disabled via ~/.config/autostart/lxqt-panel.desktop (Hidden=true)
# Waybar is used instead for a minimal, stable taskbar

# LXQt desktop disabled via ~/.config/autostart/lxqt-desktop.desktop (Hidden=true)
# Labwc gets right-click menu; wallpaper from swaybg

# Waybar taskbar (start here so it appears with labwc)
waybar >/dev/null 2>&1 &

# Device plugged audio
bash ~/.config/labwc/scripts/device-monitor.sh >/dev/null 2>&1 &

# Set background (swww for animated, or swaybg for static)
# swww-daemon >/dev/null 2>&1 &

# Keyring
/usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh >/dev/null 2>&1 &

# Polkit 
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 >/dev/null 2>&1 &

# Gtk Theme Refresh (also handled by systemd labwc-gtk-sync.service)
# bash ~/.config/labwc/scripts/gtk.sh >/dev/null 2>&1 &

# Clipboard
wl-clip-persist --clipboard regular &
wl-paste --type text --watch cliphist store &
wl-paste --type image --watch cliphist store &

# Set random wallpaper from ~/.wallpapers
~/.config/labwc/scripts/wallpaper.sh --set &

# Notification 
dunst >/dev/null 2>&1 &

# Idle device manager
swayidle -w \
    timeout 300 "~/.config/labwc/idle/brightness_ctrl.sh --fade-out" \
    resume "~/.config/labwc/idle/brightness_ctrl.sh --fade-in" \
    timeout 600 "loginctl lock-session" \
    timeout 1800 "systemctl suspend" \
    lock "~/.config/labwc/idle/lock_ctrl.sh" \
    before-sleep "~/.config/labwc/idle/sleep_ctrl.sh" \
    after-resume "~/.config/labwc/idle/brightness_ctrl.sh --fade-in" \
    >/dev/null 2>&1 &

